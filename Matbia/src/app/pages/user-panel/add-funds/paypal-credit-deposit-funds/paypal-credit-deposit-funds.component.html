@if (!displayDepositMethods()) {

<ng-template [ngTemplateOutlet]="page"></ng-template>
} @else {
<app-choose-deposite-method></app-choose-deposite-method>
}

<ng-template #page>
  <div class="section-fund-deposit">
    <div class="small--container mx-auto">
      <span class="d-flex gap-3 align-items-center link-back">
        <a href="javascript:void(0)" (click)="$event.preventDefault(); displayDepositMethods.set(true)"
          ><svg
            id=" Component_51_4"
            data-name="Component 51 â€“ 4"
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 40 40"
          >
            <rect id="Rectangle_4499" data-name="Rectangle 4499" width="40" height="40" rx="10" opacity="0.08" />
            <path
              id="Path_445"
              data-name="Path 445"
              d="M2272.064,287.648l6.376,6.376,6.376-6.376"
              transform="translate(310.275 -2258.439) rotate(90)"
              fill="none"
              stroke="#454545"
              stroke-linecap="round"
              stroke-width="1.5"
              opacity="0.55"
            />
          </svg>
        </a>
        <h1>Deposit funds via PayPal / Credit Card</h1>
      </span>

      <div class="d-flex flex-column flex-xl-row">
        <div class="card-fund-data">
          <div class="card">
            <div class="card-body">
              <label for="amount" class="form-label">PLEASE FOLLOW INSTRUCTIONS:</label>
              <div class="paypal-box text-center">
                <span>Open our PayPal charity page</span>
                <button class="btn btn-outline-primary d-flex align-items-center mx-auto" (click)="openPaypal()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15.239" height="18" viewBox="0 0 15.239 18">
                    <path
                      id="Icon_corebrands-paypal"
                      data-name="Icon corebrands-paypal"
                      d="M8.923,12.642c-.139.762-.69,4.315-.854,5.319-.012.072-.04.1-.119.1H4.99a.482.482,0,0,1-.48-.552L6.836,2.746a.807.807,0,0,1,.794-.671c6.045,0,6.553-.147,8.1.453,2.385.925,2.6,3.156,1.746,5.569-.854,2.485-2.878,3.553-5.561,3.584-1.722.028-2.759-.278-2.989.96ZM18.676,6.93c-.072-.051-.1-.072-.119.051a9.328,9.328,0,0,1-.349,1.334c-1.584,4.517-5.974,4.124-8.117,4.124a.4.4,0,0,0-.432.373c-.9,5.573-1.076,6.736-1.076,6.736A.422.422,0,0,0,9,20.06h2.521a.713.713,0,0,0,.691-.591c.028-.214-.044.242.572-3.624.183-.873.568-.782,1.163-.782,2.819,0,5.017-1.143,5.672-4.458.258-1.381.183-2.834-.944-3.676Z"
                      transform="translate(-4.504 -2.06)"
                      fill="#5d62e0"
                    />
                  </svg>
                  <div class="my-0 mx-auto d-flex align-items-center gap-2">
                    OPEN PAYPAL
                    <svg xmlns="http://www.w3.org/2000/svg" width="11.367" height="11.367" viewBox="0 0 11.367 11.367">
                      <g id="open-outline" transform="translate(1.061 0.75)">
                        <path
                          id="Path_18065"
                          data-name="Path 18065"
                          d="M127.68,24.32h6.588v6.588"
                          transform="translate(-124.712 -24.32)"
                          fill="none"
                          stroke="#5d62e0"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                        <path
                          id="Path_18066"
                          data-name="Path 18066"
                          d="M85.12,36.575l9.215-9.215"
                          transform="translate(-85.12 -27.019)"
                          fill="none"
                          stroke="#5d62e0"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.5"
                        />
                      </g>
                    </svg>
                  </div>
                </button>
              </div>
              <ul>
                <li>Click the donate button, and enter/choose <br />amount to donate.</li>
                <li>Make sure to select "Share my name and email <br />with charity".</li>
                <li>When done, copy the Reference # from your PayPal confirmation email and paste in below:</li>
              </ul>

              <a href="javascript:void(0)" class="btn-tutorial" (click)="openTutorial(tutorialContent)">
                View Tutorial
                <i>
                  <svg xmlns="http://www.w3.org/2000/svg" width="6.861" height="11.602" viewBox="0 0 6.861 11.602">
                    <path
                      id="Path_37340"
                      data-name="Path 37340"
                      d="M5322-22781l4.74,4.742-4.74,4.738"
                      transform="translate(-5320.939 22782.061)"
                      fill="none"
                      stroke="#5d62e0"
                      stroke-linecap="round"
                      stroke-width="1.5"
                    />
                  </svg>
                </i>
              </a>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <div class="row" [formGroup]="formGroup">
                <div class="col-md-6">
                  <label for="amount" class="form-label">PAYPAL DONATION AMOUNT:</label>
                  <app-amount-input formControlName="amount" [separatorLimit]="AmountDigit"></app-amount-input>
                </div>
                <div class="col-md-6">
                  <label for="ref-id" class="form-label">PAYPAL TRANSACTION REF. #:</label>
                  <input
                    minlength="17"
                    type="text"
                    class="form-control"
                    id="ref-id"
                    formControlName="refId"
                    placeholder="Enter ref #"
                  />

                  @if(RefIdField?.touched && RefIdField?.invalid) {
                  <app-input-error [errors]="RefIdField?.errors"></app-input-error>
                  }
                </div>
                <div class="col-md-12 mt-0 pt-2">
                  <button class="btn btn-calculator btn-outline-light" (click)="openMaaserCalculator()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12.858" height="12.851" viewBox="0 0 12.858 12.851">
                      <g id="graph-pie" transform="translate(-24.674 -24.71)">
                        <g
                          id="Path_37387"
                          data-name="Path 37387"
                          transform="translate(-69.907 0)"
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path
                            d="M101.736,24.71a.23.23,0,0,0-.229.229.219.219,0,0,0,.007.033h-.007v5.441a.23.23,0,0,0,.229.229h5.44v-.007a.218.218,0,0,0,.034.007.23.23,0,0,0,.229-.229A5.764,5.764,0,0,0,101.736,24.71Z"
                            stroke="none"
                          />
                          <path
                            d="M 102.3065719604492 25.54975509643555 L 102.3065719604492 29.8433952331543 L 106.5998992919922 29.8433952331543 C 106.462532043457 28.75631141662598 105.9715728759766 27.75017356872559 105.1855850219727 26.96416473388672 C 104.3996505737305 26.17821311950684 103.3935775756836 25.68722534179688 102.3065719604492 25.54975509643555 M 101.7358779907227 24.71039581298828 C 104.871696472168 24.74310493469238 107.4066772460938 27.27807426452637 107.4392013549805 30.41391563415527 C 107.4392013549805 30.54059600830078 107.3364181518555 30.64339447021484 107.2099075317383 30.64339447021484 C 107.1979751586914 30.64339447021484 107.1877517700195 30.63836479187012 107.1763381958008 30.63664436340332 L 107.1763381958008 30.64339447021484 L 101.7358779907227 30.64339447021484 C 101.6093521118164 30.64339447021484 101.5065765380859 30.54059600830078 101.5065765380859 30.41391563415527 L 101.5065765380859 24.97327423095703 L 101.513313293457 24.97327423095703 C 101.5115814208984 24.96185493469238 101.5065765380859 24.95164489746094 101.5065765380859 24.93987464904785 C 101.5065765380859 24.81319427490234 101.6093521118164 24.71039581298828 101.7358779907227 24.71039581298828 Z"
                            stroke="none"
                            fill="#5d62e0"
                          />
                        </g>
                        <g
                          id="Path_37388"
                          data-name="Path 37388"
                          transform="translate(0 -13.322)"
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path
                            d="M36.206,45.057a.229.229,0,0,0-.229-.229h-5a.229.229,0,0,1-.229-.229V39.615h-.007a.22.22,0,0,0,.007-.033.229.229,0,0,0-.229-.229c-.006,0-.01,0-.015,0v0l-.061,0a5.766,5.766,0,1,0,5.766,5.766c0-.018,0-.037,0-.055C36.2,45.061,36.206,45.059,36.206,45.057Z"
                            stroke="none"
                          />
                          <path
                            d="M 29.94570350646973 40.17668914794922 C 27.4384880065918 40.42533493041992 25.47392272949219 42.54658889770508 25.47392272949219 45.11812591552734 C 25.47392272949219 47.85628509521484 27.70157241821289 50.08393478393555 30.43973350524902 50.08393478393555 C 33.00642395019531 50.08393478393555 35.12453460693359 48.12659072875977 35.3797607421875 45.62755584716797 L 30.97443389892578 45.62755584716797 C 30.40719413757324 45.62715530395508 29.94570350646973 45.16533660888672 29.94570350646973 44.59808731079102 L 29.94570350646973 40.17668914794922 M 30.43973350524902 39.3523063659668 C 30.46015357971191 39.3523063659668 30.48040390014648 39.35369491577148 30.50082397460938 39.35386657714844 L 30.50082397460938 39.35542678833008 C 30.50618362426758 39.35508728027344 30.51068305969238 39.35231781005859 30.5162239074707 39.35231781005859 C 30.64290428161621 39.35231781005859 30.74570274353027 39.45493698120117 30.74570274353027 39.581787109375 C 30.74570274353027 39.59355545043945 30.74068260192871 39.60376739501953 30.73895263671875 39.61518478393555 L 30.74570274353027 39.61518478393555 L 30.74570274353027 44.59808731079102 C 30.74570274353027 44.72475433349609 30.84833335876465 44.82746505737305 30.97500419616699 44.82755661010742 L 35.97624206542969 44.82755661010742 C 36.10292434692383 44.82755661010742 36.20554351806641 44.93035507202148 36.20554351806641 45.05703735351562 C 36.20554351806641 45.05911636352539 36.2043342590332 45.06084442138672 36.2043342590332 45.06309509277344 C 36.20468139648438 45.08160781860352 36.20554351806641 45.09978485107422 36.20554351806641 45.11812591552734 C 36.20554351806641 48.30241775512695 33.6240234375 50.88393402099609 30.43973350524902 50.88393402099609 C 27.25544357299805 50.88393402099609 24.67392349243164 48.30241775512695 24.67392349243164 45.11812591552734 C 24.67392349243164 41.93383407592773 27.25544357299805 39.3523063659668 30.43973350524902 39.3523063659668 Z"
                            stroke="none"
                            fill="#5d62e0"
                          />
                        </g>
                      </g>
                    </svg>
                    ×ž×¢×©×¨ Calculator
                  </button>
                </div>
                <div class="col-md-12">
                  <label for="note" class="form-label">NOTE:</label>
                  <textarea
                    type="text"
                    class="form-control"
                    id="note"
                    formControlName="note"
                    placeholder="Write a note"
                  ></textarea>
                </div>
                <div class="col-md-12">
                  <div class="form-check">
                    <input
                      id="third-party"
                      type="checkbox"
                      class="form-check-input"
                      alt=""
                      formControlName="isThirdPartyDeposit"
                    />
                    <label for="third-party" class="form-check-label">This is a third-party deposit</label>
                  </div>
                </div>
                @if(IsThirdPartyDeposit?.value) {

                <div class="col-md-12">
                  <label for="payername" class="form-label">PAYER NAME</label>
                  <input
                    type="text"
                    class="form-control"
                    id="payername"
                    formControlName="payername"
                    placeholder="Enter payer name"
                  />
                  @if(Payername?.touched && Payername?.invalid) {
                  <app-input-error [errors]="Payername?.errors"></app-input-error>
                  }
                </div>
                <div class="col-md-12">
                  <label class="form-label" for="address"> ADDRESS: </label>
                  <input
                    type="text"
                    id="address"
                    placeholder="Street address"
                    class="form-control"
                    formControlName="address"
                    appAddressAutocomplete
                    (onAddressChange)="onAddressChange($event)"
                  />
                  @if(Address?.touched && Address?.invalid) {
                  <app-input-error [errors]="Address?.errors"></app-input-error>
                  }
                </div>
                <div class="col-md-6">
                  <label class="form-label"> CITY: </label>
                  <input
                    type="text"
                    placeholder="Enter City"
                    class="form-control"
                    formControlName="city"
                    [attr.autocomplete]="isAutoSuggestion ? 'new-city' : null"
                  />
                  @if(City?.touched && City?.invalid) {
                  <app-input-error [errors]="City?.errors"></app-input-error>
                  }
                </div>
                <div class="col-md-3">
                  <label class="form-label"> STATE: </label>
                  <ng-select
                    class="ng-select-state"
                    bindLabel="item_id"
                    bindValue="item_id"
                    [addTag]="true"
                    [searchable]="true"
                    formControlName="state"
                    [searchFn]="customSearchFn"
                    [items]="commonDataService.stateList"
                  >
                    <ng-template ng-option-tmp let-item="item">
                      {{ item.item_id }}
                    </ng-template>
                  </ng-select>
                  @if(State?.touched && State?.invalid) {
                  <app-input-error [errors]="State?.errors"></app-input-error>
                  }
                </div>

                <div class="col-md-3">
                  <label class="form-label"> ZIP: </label>
                  <input
                    type="tel"
                    id="zipcode"
                    placeholder="Zip Code"
                    class="form-control"
                    formControlName="zip"
                    [validation]="zipCodeValidation"
                    [mask]="zipCodeMask"
                    [attr.autocomplete]="isAutoSuggestion ? 'new-zip' : null"
                  />
                  @if(Zip?.touched && Zip?.invalid) {
                  <app-input-error [errors]="Zip?.errors"></app-input-error>
                  }
                </div>
                <div class="col-md-6">
                  <label class="form-label">EMAIL ADDRESS:</label>
                  <input
                    type="email"
                    placeholder="Enter Email Address"
                    class="form-control"
                    formControlName="email"
                    [attr.autocomplete]="isAutoSuggestion ? 'new-email' : null"
                  />
                  @if(Email?.touched && Email?.invalid) {
                  <app-input-error [errors]="Email?.errors"></app-input-error>
                  }
                </div>
                <div class="col-md-6">
                  <label class="form-label"> PHONE NUMBER:</label>
                  <app-phone-input [isSubmit]="false" formControlName="phone"></app-phone-input>
                  @if(Phone?.touched && Phone?.invalid) {
                  <app-input-error [errors]="Phone?.errors"></app-input-error>
                  }
                </div>
                }
                <div class="col-md-12 pt-2">
                  <button class="btn btn-primary w-100 mt-auto" (click)="onSubmit()">SUBMIT</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flex-fill">
          <app-add-funds-other-method-option-links type="PAYPAL">
            <ng-template #timeTemp> Funded in 1-2 business days </ng-template>

            <ng-template #completedTemp> Completes on 25th of the month </ng-template>

            <ng-template #minimumTemplate> Minimum deposit $50 </ng-template>
          </app-add-funds-other-method-option-links>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #tutorialContent let-modal>
  <button class="btn-close" aria-label="Close" (click)="onCloseTutorial($event, modal)">
    <svg xmlns="http://www.w3.org/2000/svg" width="13.423" height="13.426" viewBox="0 0 13.423 13.426">
      <path
        id="Icon_ionic-ios-close"
        data-name="Icon ionic-ios-close"
        d="M8.3,6.711l4.8-4.8A1.124,1.124,0,0,0,11.51.327l-4.8,4.8L1.92.327A1.124,1.124,0,1,0,.33,1.916l4.8,4.8-4.8,4.8A1.124,1.124,0,0,0,1.92,13.1l4.8-4.8,4.8,4.8A1.124,1.124,0,0,0,13.1,11.507Z"
        transform="translate(0 13.426) rotate(-90)"
        opacity="0.303"
      />
    </svg>
  </button>
  <div class="modal-body text-center">
    <h5>How to donate via Paypal</h5>

    <ngb-carousel>
      <ng-template ngbSlide>
        <p>Open PayPal, and click the donate button, then enter/choose amount to donate.</p>
        <figure>
          <img src="assets/dist/img/image-1.png" alt="" />
        </figure>
      </ng-template>
      <ng-template ngbSlide>
        <p>Make sure to select "Share my name and email with charity".</p>
        <figure>
          <img src="assets/dist/img/image-2.png" alt="" />
        </figure>
      </ng-template>
      <ng-template ngbSlide>
        <p>When done, copy the transaction ID from your PayPal confirmation email.</p>
        <figure>
          <img src="assets/dist/img/image-3.png" alt="" />
        </figure>
      </ng-template>
      <ng-template ngbSlide>
        <p>Paste the Transaction ID into the Transaction ID field here in Matbia.</p>
        <figure>
          <img src="assets/dist/img/image-4.png" alt="" />
        </figure>
      </ng-template>
    </ngb-carousel>
  </div>
</ng-template>
